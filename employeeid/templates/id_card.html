{% extends 'base.html' %}
{% load static %}

{% block title %}Employee ID Card - {{ employee.full_name }}{% endblock %}

{% block extra_css %}
<!-- Employee ID Card CSS -->
<link rel="stylesheet" href="{% static 'employeeid/css/employeeid.css' %}">
{% endblock %}

{% block content %}
<div class="id-card-container">
    <div class="id-card">
        <div class="id-card-company">{{ employee.company }}</div>
        <div class="id-card-photo">
            <img src="{{ employee.profile_image.url }}" alt="{{ employee.full_name }}" class="img-fluid">
        </div>
        <div class="id-card-info">
            <h3>{{ employee.full_name }}</h3>
            <p>{{ employee.designation }}</p>
            <p><strong>ID:</strong> {{ employee.employee_id }}</p>
            <p><strong>Department:</strong> {{ employee.department }}</p>
            <p><strong>Join Date:</strong> {{ employee.join_date|date:"d M Y" }}</p>
            <p><strong>Email:</strong> {{ employee.email|default:"N/A" }}</p>
        </div>
        <div class="id-card-qr">
            <img src="{{ employee.qr_code.url }}" alt="Employee QR Code" class="img-fluid">
        </div>
    </div>
    
    {% if not request.GET.print %}
    <div class="text-center mt-4">
        <button class="btn btn-primary id-card-print">
            <i class="fas fa-print me-2"></i>Print ID Card
        </button>
        <a href="{% url 'employeeid:upload_employee' %}" class="btn btn-outline-secondary ms-2">
            <i class="fas fa-arrow-left me-2"></i>Back to List
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<!-- Employee ID Card JavaScript -->
<script src="{% static 'employeeid/js/employeeid.js' %}"></script>
{% if request.GET.print %}
<script>
    // Auto-print when print parameter is in URL
    document.addEventListener('DOMContentLoaded', function() {
        window.print();
        setTimeout(function() {
            window.close();
        }, 1000);
    });
</script>
{% endif %}
{% endblock %}
