<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ resume.full_name }} - Resume</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.6;
            color: #333;
            max-width: 21cm;
            margin: 0 auto;
            padding: 1.5cm;
            font-size: 11pt;
        }
        .header { 
            text-align: center; 
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #2c3e50;
        }
        .profile-img {
            width: 100px; 
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
            border: 3px solid #2c3e50;
        }
        .section { 
            margin: 15px 0;
        }
        .section h2 { 
            font-size: 14pt;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .contact-info {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 5px;
        }
        .contact-info span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .contact-info i {
            color: #2c3e50;
        }
        h1 { 
            font-size: 24pt;
            color: #2c3e50;
            margin: 5px 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .job-title {
            color: #7f8c8d;
            font-size: 14pt;
            margin: 5px 0 15px;
            font-weight: normal;
        }
        .item {
            margin-bottom: 15px;
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .item-title {
            font-weight: bold;
            font-size: 12pt;
        }
        .item-subtitle {
            font-style: italic;
            color: #7f8c8d;
        }
        .item-duration {
            color: #7f8c8d;
            font-size: 10pt;
        }
        .skills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .skill-tag {
            background: #f1f1f1;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 10pt;
        }
        @media print {
            body {
                padding: 1cm;
            }
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>

<div class="header">
    {% if resume.profile_image %}
    <img src="{{ resume.profile_image.url }}" class="profile-img" alt="{{ resume.full_name }}">
    {% endif %}
    <h1>{{ resume.full_name }}</h1>
    {% if resume.job_title %}
    <div class="job-title">{{ resume.job_title }}</div>
    {% endif %}
    <div class="contact-info">
        {% if resume.email %}
        <span><i class="fas fa-envelope"></i> {{ resume.email }}</span>
        {% endif %}
        {% if resume.phone %}
        <span><i class="fas fa-phone"></i> {{ resume.phone }}</span>
        {% endif %}
        {% if resume.location %}
        <span><i class="fas fa-map-marker-alt"></i> {{ resume.location }}</span>
        {% endif %}
        {% if resume.linkedin %}
        <span><i class="fab fa-linkedin"></i> {{ resume.linkedin|default:''|slice:":30" }}...</span>
        {% endif %}
        {% if resume.github %}
        <span><i class="fab fa-github"></i> {{ resume.github|default:''|slice:":30" }}...</span>
        {% endif %}
    </div>
</div>

<!-- Professional Summary -->
{% if resume.summary %}
<div class="section">
    <h2>Professional Summary</h2>
    <p>{{ resume.summary }}</p>
</div>
{% endif %}

<!-- Skills Section -->
<div class="section">
    <h2>Technical Skills</h2>
    <div class="skills">
        {% if resume.technical_skills %}
            {% for skill in resume.technical_skills %}
                <span class="skill-tag">{{ skill }}</span>
            {% endfor %}
        {% else %}
            <p>No technical skills listed.</p>
        {% endif %}
    </div>
</div>

<!-- Work Experience -->
<div class="section">
    <h2>Work Experience</h2>
    {% for exp in resume.experiences.all %}
    <div class="item">
        <div class="item-header">
            <div>
                <div class="item-title">{{ exp.job_title }}</div>
                <div class="item-subtitle">{{ exp.company }}</div>
            </div>
            <div class="item-duration">{{ exp.duration }}</div>
        </div>
        <div class="item-description">
            {{ exp.description|linebreaksbr }}
        </div>
    </div>
    {% empty %}
        <p>No work experience listed.</p>
    {% endfor %}
</div>

<!-- Education -->
<div class="section">
    <h2>Education</h2>
    {% for edu in resume.education_entries.all %}
    <div class="item">
        <div class="item-header">
            <div>
                <div class="item-title">{{ edu.degree }}</div>
                <div class="item-subtitle">{{ edu.institution }}</div>
            </div>
            <div class="item-duration">{{ edu.year }}</div>
        </div>
        {% if edu.result %}
        <div class="item-description">
            Result: {{ edu.result }}
        </div>
        {% endif %}
    </div>
    {% empty %}
        <p>No education details available.</p>
    {% endfor %}
</div>

<!-- Projects -->
{% if resume.projects.all %}
<div class="section">
    <h2>Projects</h2>
    {% for proj in resume.projects.all %}
    <div class="item">
        <div class="item-header">
            <div class="item-title">{{ proj.title }}</div>
            {% if proj.tech_stack %}
            <div class="item-duration">{{ proj.tech_stack }}</div>
            {% endif %}
        </div>
        <div class="item-description">
            {{ proj.description|linebreaksbr }}
            {% if proj.live_url %}
            <div style="margin-top: 5px;">
                <strong>Live Demo:</strong> <a href="{{ proj.live_url }}" target="_blank">{{ proj.live_url|truncatechars:40 }}</a>
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Certifications -->
{% if resume.certifications.all %}
<div class="section">
    <h2>Certifications</h2>
    <ul style="padding-left: 20px; margin: 5px 0;">
    {% for cert in resume.certifications.all %}
        <li style="margin-bottom: 5px;">
            <strong>{{ cert.title }}</strong> - {{ cert.platform }}
            {% if cert.year %}({{ cert.year }}){% endif %}
        </li>
    {% endfor %}
    </ul>
</div>
{% endif %}

<!-- Additional Sections -->
<div class="section" style="display: flex; justify-content: space-between; flex-wrap: wrap;">
    <!-- Languages -->
    {% if resume.languages %}
    <div style="width: 48%; margin-bottom: 15px;">
        <h2>Languages</h2>
        <ul style="padding-left: 20px; margin: 5px 0;">
            {% for lang in resume.languages %}
                <li>{{ lang }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    <!-- Soft Skills -->
    {% if resume.soft_skills %}
    <div style="width: 48%; margin-bottom: 15px;">
        <h2>Soft Skills</h2>
        <div class="skills">
            {% for skill in resume.soft_skills %}
                <span class="skill-tag">{{ skill }}</span>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Hobbies -->
    {% if resume.hobbies %}
    <div style="width: 48%;">
        <h2>Hobbies</h2>
        <p>{{ resume.hobbies }}</p>
    </div>
    {% endif %}
    
    <!-- Achievements -->
    {% if resume.achievements.all %}
    <div style="width: 48%;">
        <h2>Achievements</h2>
        <ul style="padding-left: 20px; margin: 5px 0;">
        {% for ach in resume.achievements.all %}
        <p>{{ ach.description }}</p>
    {% empty %}
        <p>No achievements listed.</p>
    {% endfor %}
</div>

<div class="section">
    <h2>References</h2>
    {% for ref in resume.references.all %}
        <p><strong>{{ ref.name }}</strong> ({{ ref.relationship }})<br>Contact: {{ ref.contact_info }}</p>
    {% empty %}
        <p>No references listed.</p>
    {% endfor %}
</div>

</body>
</html>
